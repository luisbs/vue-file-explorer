var FileExplorer=function(e){"use strict";function t(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==n)return;var o,r,a=[],l=!0,i=!1;try{for(n=n.call(e);!(l=(o=n.next()).done)&&(a.push(o.value),!t||a.length!==t);l=!0);}catch(e){i=!0,r=e}finally{try{l||null==n.return||n.return()}finally{if(i)throw r}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return n(e,t);var o=Object.prototype.toString.call(e).slice(8,-1);"Object"===o&&e.constructor&&(o=e.constructor.name);if("Map"===o||"Set"===o)return Array.from(e);if("Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o))return n(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}var o=e.defineComponent({name:"FileExplorer",emits:["initialLoad","folderLoad","event"],props:{layout:{type:String,default:"cards",validator:function(e){return["details","cards"].includes(e)}},render:Function},setup:function(t,n){var o=n.emit,r=e.ref(t.layout),a=e.ref(new Map),l=e.ref(0),i=function(e){return e.forEach((function(e,t){return a.value.set(t,e)}))};o("initialLoad",i),l.value=Array.from(a.value.keys()).shift()||0;var d=function(e,t){return document.querySelectorAll(".vfe ".concat(e)).forEach((function(e){return e.onclick=function(n){return t(n,e)}}))},c=function(){d("button[data-open]",(function(e,t){l.value=t.dataset.open||0,o("folderLoad",l.value,i,a.value.has(l.value))})),d(".vfe-folder button[data-action]",(function(e,t){return o("event",{type:"folder",event:t.dataset.action||"unknown",elementId:t.dataset.element||0})})),d(".vfe-file button[data-action]",(function(e,t){return o("event",{type:"file",event:t.dataset.action||"unknown",elementId:t.dataset.element||0})}))};return e.watch(l,c,{flush:"post"}),e.onMounted((function(){d("button[data-layout]",(function(e,t){return r.value=t.dataset.layout||"details"})),c()})),{tree:a,layoutType:r,folderId:l,folders:e.computed((function(){var e;return(null===(e=a.value.get(l.value))||void 0===e?void 0:e.folders)||[]})),files:e.computed((function(){var e;return(null===(e=a.value.get(l.value))||void 0===e?void 0:e.files)||[]})),path:e.computed((function(){var e=[],t=a.value.get(l.value)||{};if(e.push([l.value,t.title,"current"]),t.parentId){var n,o=null!==(n=t.parentId)&&void 0!==n?n:null;do{var r=a.value.get(o);r&&(r.parentId?(e.unshift([o,r.title]),o=r.parentId):(e.unshift([o,r.title,"root"]),o=null))}while(null!==o)}return e}))}}}),r={class:"vfe vue-file-explorer"},a={class:"vfe-bar"},l={class:"vfe-path"},i={key:0},d={class:"vfe-layout"},c=e.createVNode("button",{type:"button","data-layout":"cards"},"Cards Layout",-1),u=e.createVNode("button",{type:"button","data-layout":"details"},"Details Layout",-1),s={class:"vfe-content"},f={key:0,class:"vfe-cards"},p={key:1,class:"vfe-details"},v=e.createVNode("li",{class:"vfe-header"},[e.createVNode("span",null,"Id"),e.createVNode("span",null,"Name"),e.createVNode("span",null,"Actions")],-1),y={class:"vfe-actions"},m={class:"vfe-menu"},b={class:"vfe-actions"},h={class:"vfe-menu"};!function(e,t){void 0===t&&(t={});var n=t.insertAt;if(e&&"undefined"!=typeof document){var o=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css","top"===n&&o.firstChild?o.insertBefore(r,o.firstChild):o.appendChild(r),r.styleSheet?r.styleSheet.cssText=e:r.appendChild(document.createTextNode(e))}}("\n.vue-file-explorer {\n  display: flex;\n  flex-direction: column;\n}\n.vfe-bar {\n  display: flex;\n  justify-content: space-between;\n}\n/* .vfe-path */\n/* .vfe-layout */\n\n/* .vfe-content */\n/* .vfe-cards */\n.vfe-details {\n  display: flex;\n  flex-direction: column;\n}\n.vfe-details > * {\n  display: flex;\n  justify-content: space-between;\n}\n\n/* .vfe-header */\n/* .vfe-folder */\n/* .vfe-file */\n.vfe-actions {\n  position: relative;\n}\n.vfe-menu {\n  z-index: -1;\n  position: absolute;\n  right: 0;\n  display: flex;\n  flex-direction: column;\n  overflow: hidden;\n  opacity: 0;\n  height: 0;\n  width: 0;\n}\n.vfe-actions > label {\n  user-select: none;\n}\n.vfe-actions > input {\n  display: none;\n}\n.vfe-actions > input:checked + .vfe-menu {\n  z-index: 1;\n  height: auto;\n  width: auto;\n  opacity: 1;\n}\n"),o.render=function(n,o,k,S,N,g){return e.openBlock(),e.createBlock("div",r,[e.createVNode("div",a,[e.createVNode("div",l,[e.renderSlot(n.$slots,"folder-path",{path:n.path},(function(){return[(e.openBlock(!0),e.createBlock(e.Fragment,null,e.renderList(n.path,(function(n,o){var r=t(n,3),a=r[0],l=r[1],d=r[2];return e.openBlock(),e.createBlock(e.Fragment,{key:o},["current"===d?(e.openBlock(),e.createBlock("span",i,e.toDisplayString(l),1)):(e.openBlock(),e.createBlock("button",{key:1,type:"button","data-open":a},e.toDisplayString(l),9,["data-open"]))],64)})),128))]}))]),e.createVNode("div",null,e.toDisplayString(n.folderId),1),e.createVNode("div",d,[e.renderSlot(n.$slots,"layout-selector",{},(function(){return[c,u]}))])]),e.createVNode("div",s,["cards"===n.layoutType?(e.openBlock(),e.createBlock("div",f,[e.renderSlot(n.$slots,"cards-folders",{folders:n.folders},(function(){return[(e.openBlock(!0),e.createBlock(e.Fragment,null,e.renderList(n.folders,(function(t,o){return e.openBlock(),e.createBlock("div",{key:o,class:"vfe-folder"},[e.renderSlot(n.$slots,"cards-folder",{id:t.id,title:t.title,data:t},(function(){return[e.createVNode("button",{type:"butten","data-open":t.id},e.toDisplayString(t.id)+" - "+e.toDisplayString(t.title),9,["data-open"])]}))])})),128))]})),e.renderSlot(n.$slots,"cards-files",{files:n.files},(function(){return[(e.openBlock(!0),e.createBlock(e.Fragment,null,e.renderList(n.files,(function(t,o){return e.openBlock(),e.createBlock("div",{key:o,class:"vfe-files"},[e.renderSlot(n.$slots,"cards-file",{id:t.id,title:t.title,data:t},(function(){return[e.createVNode("span",null,e.toDisplayString(t.id)+" - "+e.toDisplayString(t.title),1)]}))])})),128))]}))])):(e.openBlock(),e.createBlock("ul",p,[e.renderSlot(n.$slots,"details-header",{},(function(){return[v]})),e.renderSlot(n.$slots,"details-folders",{folders:n.folders},(function(){return[(e.openBlock(!0),e.createBlock(e.Fragment,null,e.renderList(n.folders,(function(t,o){return e.openBlock(),e.createBlock("li",{key:o,class:"vfe-folder"},[e.renderSlot(n.$slots,"details-folder",{id:t.id,title:t.title,data:t},(function(){return[e.createVNode("span",null,e.toDisplayString(t.id),1),e.createVNode("span",null,e.toDisplayString(t.title),1)]})),e.renderSlot(n.$slots,"folder-actions",{id:t.id},(function(){return[e.createVNode("div",y,[e.createVNode("label",{for:"id-".concat(t.id)},"Actions",8,["for"]),e.createVNode("input",{type:"checkbox",id:"id-".concat(t.id)},null,8,["id"]),e.createVNode("div",m,[e.renderSlot(n.$slots,"folder-menu",{id:t.id},(function(){return[e.createVNode("button",{type:"button","data-open":t.id},"Abrir",8,["data-open"]),e.createVNode("button",{type:"button","data-action":"rename","data-element":t.id},"Renombrar",8,["data-element"]),e.createVNode("button",{type:"button","data-action":"delete","data-element":t.id},"Eliminar",8,["data-element"])]}))])])]}))])})),128))]})),e.renderSlot(n.$slots,"details-files",{files:n.files},(function(){return[(e.openBlock(!0),e.createBlock(e.Fragment,null,e.renderList(n.files,(function(t,o){return e.openBlock(),e.createBlock("li",{key:o,class:"vfe-file"},[e.renderSlot(n.$slots,"details-file",{id:t.id,title:t.title,data:t},(function(){return[e.createVNode("span",null,e.toDisplayString(t.id),1),e.createVNode("span",null,e.toDisplayString(t.title),1)]})),e.renderSlot(n.$slots,"file-actions",{id:t.id},(function(){return[e.createVNode("div",b,[e.createVNode("label",{for:"id-".concat(t.id)},"Actions",8,["for"]),e.createVNode("input",{type:"checkbox",id:"id-".concat(t.id)},null,8,["id"]),e.createVNode("div",h,[e.renderSlot(n.$slots,"file-menu",{id:t.id},(function(){return[e.createVNode("button",{type:"button","data-action":"open","data-element":t.id},"Abrir",8,["data-element"]),e.createVNode("button",{type:"button","data-action":"rename","data-element":t.id},"Renombrar",8,["data-element"]),e.createVNode("button",{type:"button","data-action":"delete","data-element":t.id},"Eliminar",8,["data-element"])]}))])])]}))])})),128))]}))]))])])};var k=function(){var e=o;return e.install=function(t){t.component("FileExplorer",e)},e}(),S=Object.freeze({__proto__:null,default:k});return Object.entries(S).forEach((function(e){var n=t(e,2),o=n[0],r=n[1];"default"!==o&&(k[o]=r)})),k}(Vue);