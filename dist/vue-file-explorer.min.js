var FileExplorer=function(e){"use strict";function t(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==n)return;var r,o,a=[],l=!0,i=!1;try{for(n=n.call(e);!(l=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);l=!0);}catch(e){i=!0,o=e}finally{try{l||null==n.return||n.return()}finally{if(i)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return n(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return n(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var r=e.defineComponent({name:"FileExplorer",emits:["initialLoad","folderLoad","action","preUpdate","postUpdate"],props:{layout:{type:String,default:"table",validator:function(e){return["cards","table"].includes(e)}},title:{type:String,default:"title"},cards:String,table:String},setup:function(n,r){var o=r.emit,a=e.ref(n.layout),l=e.ref(new Map),i=e.ref(0),c=function(e){return e.forEach((function(e,t){return l.value.set(String(t),e)}))};o("initialLoad",c),i.value=Array.from(l.value.keys()).shift()||0;var d=function(e,t){return document.querySelectorAll(".vfe ".concat(e)).forEach((function(e){return e.onclick=function(n){return t(n,e)}}))},u=function(){d("button[data-open]",(function(e,t){var n=t.dataset.open||0;o("folderLoad",n,c,l.value.has(n),(function(){return i.value=n}))})),d(".vfe-folder button[data-action]",(function(e,t){return o("action",{type:"folder",action:t.dataset.action||"unknown",elementId:t.dataset.element||0})})),d(".vfe-file button[data-action]",(function(e,t){return o("action",{type:"file",action:t.dataset.action||"unknown",elementId:t.dataset.element||0})}))};return e.watch([a,i],(function(e){var n=t(e,1)[0];return o("preUpdate",n)}),{flush:"pre"}),e.watch([a,i],(function(e){var n=t(e,1)[0];u(),o("postUpdate",n)}),{flush:"post"}),e.onMounted((function(){d("button[data-layout]",(function(e,t){return a.value=t.dataset.layout||"table"})),u()})),{tree:l,layoutType:a,folderId:i,folders:e.computed((function(){var e;return(null===(e=l.value.get(i.value))||void 0===e?void 0:e.folders)||[]})),files:e.computed((function(){var e;return(null===(e=l.value.get(i.value))||void 0===e?void 0:e.files)||[]})),path:e.computed((function(){var e=[],t=l.value.get(i.value);if(e.push([i.value,String(null==t?void 0:t[n.title]),"current"]),null!=t&&t.parentId){var r,o=null!==(r=String(t.parentId))&&void 0!==r?r:null;do{var a=l.value.get(o);a&&(a.parentId?(e.unshift([o,String(null==a?void 0:a[n.title])]),o=a.parentId):(e.unshift([o,String(null==a?void 0:a[n.title]),"root"]),o=null))}while(null!==o)}return e}))}}}),o={class:"vfe vue-file-explorer"},a={class:"vfe-bar"},l={class:"vfe-path"},i={key:0},c={class:"vfe-layout"},d=e.createVNode("button",{type:"button","data-layout":"cards"},"Cards Layout",-1),u=e.createVNode("button",{type:"button","data-layout":"table"},"Table Layout",-1),f={class:"vfe-content"},s={class:"vfe-header"},p=e.createVNode("tr",null,[e.createVNode("th",null,"Id"),e.createVNode("th",null,"Actions")],-1),v={class:"vfe-content"},y={class:"vfe-actions"},b={class:"vfe-menu"},m={class:"vfe-actions"},h={class:"vfe-menu"};!function(e,t){void 0===t&&(t={});var n=t.insertAt;if(e&&"undefined"!=typeof document){var r=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");o.type="text/css","top"===n&&r.firstChild?r.insertBefore(o,r.firstChild):r.appendChild(o),o.styleSheet?o.styleSheet.cssText=e:o.appendChild(document.createTextNode(e))}}('\n.vue-file-explorer {\n  display: flex;\n  flex-direction: column;\n}\n.vfe-bar {\n  display: flex;\n  justify-content: space-between;\n}\n/* .vfe-path */\n/* .vfe-layout */\n\n/* .vfe-content */\n/* .vfe-cards */\n.vfe-table {\n  width: 100%;\n}\n/* .vfe-table > * */\n\n/* .vfe-header */\n/* .vfe-folder */\n/* .vfe-file */\n.vfe-actions {\n  position: relative;\n}\n.vfe-actions > label {\n  user-select: none;\n}\n.vfe-actions > input[type="checkbox"] {\n  display: none;\n}\n.vfe-actions .vfe-menu {\n  z-index: -1;\n  position: absolute;\n  display: flex;\n  flex-direction: column;\n  overflow: hidden;\n  opacity: 0;\n  height: 0;\n  width: 0;\n}\n.vfe-actions > input:checked + .vfe-menu {\n  z-index: 1;\n  height: auto;\n  width: auto;\n  opacity: 1;\n}\n'),r.render=function(n,r,k,g,S,B){return e.openBlock(),e.createBlock("div",o,[e.createVNode("div",a,[e.createVNode("div",l,[e.renderSlot(n.$slots,"folder-path",{path:n.path},(function(){return[(e.openBlock(!0),e.createBlock(e.Fragment,null,e.renderList(n.path,(function(n,r){var o=t(n,3),a=o[0],l=o[1],c=o[2];return e.openBlock(),e.createBlock(e.Fragment,{key:r},["current"===c?(e.openBlock(),e.createBlock("span",i,e.toDisplayString(l),1)):(e.openBlock(),e.createBlock("button",{key:1,type:"button","data-open":a},e.toDisplayString(l),9,["data-open"]))],64)})),128))]}))]),e.createVNode("div",c,[e.renderSlot(n.$slots,"layout-selector",{},(function(){return[d,u]}))])]),e.createVNode("div",f,["cards"===n.layoutType?(e.openBlock(),e.createBlock("div",{key:0,class:["vfe-cards",n.cards]},[e.renderSlot(n.$slots,"cards-folders",{folders:n.folders,tree:n.tree},(function(){return[(e.openBlock(!0),e.createBlock(e.Fragment,null,e.renderList(n.folders,(function(t,r){return e.openBlock(),e.createBlock("div",{key:r,class:"vfe-folder"},[e.renderSlot(n.$slots,"cards-folder",{id:t.id,data:t,tree:n.tree},(function(){return[e.createVNode("button",{type:"butten","data-open":t.id},e.toDisplayString(t.id),9,["data-open"])]}))])})),128))]})),e.renderSlot(n.$slots,"cards-files",{files:n.files},(function(){return[(e.openBlock(!0),e.createBlock(e.Fragment,null,e.renderList(n.files,(function(t,r){return e.openBlock(),e.createBlock("div",{key:r,class:"vfe-file"},[e.renderSlot(n.$slots,"cards-file",{id:t.id,data:t},(function(){return[e.createVNode("span",null,e.toDisplayString(t.id),1)]}))])})),128))]}))],2)):(e.openBlock(),e.createBlock("table",{key:1,class:["vfe-table",n.table]},[e.createVNode("thead",s,[e.renderSlot(n.$slots,"table-header",{},(function(){return[p]}))]),e.createVNode("tbody",v,[e.renderSlot(n.$slots,"table-folders",{folders:n.folders,tree:n.tree},(function(){return[(e.openBlock(!0),e.createBlock(e.Fragment,null,e.renderList(n.folders,(function(t){return e.openBlock(),e.createBlock("tr",{key:t.id,class:"vfe-folder"},[e.renderSlot(n.$slots,"table-folder",{id:t.id,data:t,tree:n.tree},(function(){return[e.createVNode("td",null,e.toDisplayString(t.id),1),e.createVNode("td",y,[e.createVNode("label",{for:"id-".concat(t.id)},"Actions",8,["for"]),e.createVNode("input",{type:"checkbox",id:"id-".concat(t.id)},null,8,["id"]),e.createVNode("div",b,[e.createVNode("button",{type:"button","data-open":t.id},"Abrir",8,["data-open"]),e.createVNode("button",{type:"button","data-action":"rename","data-element":t.id},"Renombrar",8,["data-element"]),e.createVNode("button",{type:"button","data-action":"delete","data-element":t.id},"Eliminar",8,["data-element"])])])]}))])})),128))]})),e.renderSlot(n.$slots,"table-files",{files:n.files},(function(){return[(e.openBlock(!0),e.createBlock(e.Fragment,null,e.renderList(n.files,(function(t){return e.openBlock(),e.createBlock("tr",{key:t.id,class:"vfe-file"},[e.renderSlot(n.$slots,"table-file",{id:t.id,data:t},(function(){return[e.createVNode("td",null,e.toDisplayString(t.id),1),e.createVNode("td",m,[e.createVNode("label",{for:"id-".concat(t.id)},"Actions",8,["for"]),e.createVNode("input",{type:"checkbox",id:"id-".concat(t.id)},null,8,["id"]),e.createVNode("div",h,[e.createVNode("button",{type:"button","data-action":"open","data-element":t.id},"Abrir",8,["data-element"]),e.createVNode("button",{type:"button","data-action":"rename","data-element":t.id},"Renombrar",8,["data-element"]),e.createVNode("button",{type:"button","data-action":"delete","data-element":t.id},"Eliminar",8,["data-element"])])])]}))])})),128))]}))])],2))])])};var k=function(){var e=r;return e.install=function(t){t.component("FileExplorer",e)},e}(),g=Object.freeze({__proto__:null,default:k});return Object.entries(g).forEach((function(e){var n=t(e,2),r=n[0],o=n[1];"default"!==r&&(k[r]=o)})),k}(Vue);