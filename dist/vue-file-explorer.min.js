var FileExplorer=function(e){"use strict";function t(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==n)return;var r,o,a=[],l=!0,i=!1;try{for(n=n.call(e);!(l=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);l=!0);}catch(e){i=!0,o=e}finally{try{l||null==n.return||n.return()}finally{if(i)throw o}}return a}(e,t)||n(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(e,t){if(e){if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var o=e.defineComponent({name:"FileExplorer",emits:["initialLoad","folderLoad","action","preUpdate","postUpdate"],props:{layout:{type:String,default:"table",validator:function(e){return["cards","table"].includes(e)}},title:{type:String,default:"title"},cards:String,table:String},setup:function(r,o){var a=o.emit,l=e.ref(r.layout),i=e.ref(new Map),u=e.ref("0"),c=function(e){console.log("appending",e),Array.isArray(e)?"string"==typeof e[0]?(console.log("adding by simple Array '".concat(e[0],"' - ").concat(String(e[0])),e[1]),"8"!=e[0]&&i.value.set(String(e[0]),e[1])):e.forEach((function(e){var n=t(e,2),r=n[0],o=n[1];return i.value.set(String(r),o)})):e.forEach((function(e,t){return i.value.set(String(t),e)}))};return a("initialLoad",(function(e){c(e),u.value=String(Array.from(i.value.keys()).shift()||"0")})),e.onMounted((function(){var e=document.querySelector(".vfe");e&&(e.onclick=function(t){try{var r,o,d,f,s,v,p,y=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=n(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var o=0,a=function(){};return{s:a,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,i=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){u=!0,l=e},f:function(){try{i||null==r.return||r.return()}finally{if(u)throw l}}}}(null!==(r=null!==(o=t.composedPath())&&void 0!==o?o:null===(d=event)||void 0===d?void 0:d.path)&&void 0!==r?r:[null!==(f=null===(s=event)||void 0===s?void 0:s.target)&&void 0!==f?f:null===(v=event)||void 0===v?void 0:v.currentTarget]);try{for(y.s();!(p=y.n()).done;){var h,b=p.value;if(b===e)break;var m=null!==(h=null==b?void 0:b.dataset)&&void 0!==h?h:{};"open"in m?function(){var e=m.open||"0";a("folderLoad",e,c,i.value.has(e),(function(){return u.value=e}))}():"layout"in m?l.value=m.layout||"table":"action"in m&&"folder"in m?a("action",{type:"folder",action:m.action||"unknown",elementId:m.folder||"0"}):"action"in m&&"file"in m&&a("action",{type:"file",action:m.action||"unknown",elementId:m.file||"0"})}}catch(e){y.e(e)}finally{y.f()}}catch(e){}})})),{tree:{},layoutType:l,folderId:u,folders:e.computed((function(){var e,t=i.value.get(u.value);return console.log(u.value,t,null==t?void 0:t.folders),(null===(e=i.value.get(u.value))||void 0===e?void 0:e.folders)||[]})),files:e.computed((function(){var e;return(null===(e=i.value.get(u.value))||void 0===e?void 0:e.files)||[]})),path:e.computed((function(){var e=[],t=i.value.get(u.value);if(e.push([u.value,String(null==t?void 0:t[r.title]),"current"]),null!=t&&t.parentId){var n,o=null!==(n=String(t.parentId))&&void 0!==n?n:null;do{var a=i.value.get(o);a&&(a.parentId?(e.unshift([o,String(null==a?void 0:a[r.title])]),o=a.parentId):(e.unshift([o,String(null==a?void 0:a[r.title]),"root"]),o=null))}while(null!==o)}return e}))}}}),a={class:"vfe vue-file-explorer"},l={class:"vfe-bar"},i={class:"vfe-path"},u={key:0},c={class:"vfe-layout"},d=e.createVNode("button",{type:"button","data-layout":"cards"},"Cards Layout",-1),f=e.createVNode("button",{type:"button","data-layout":"table"},"Table Layout",-1),s={class:"vfe-content"},v={class:"vfe-header"},p=e.createVNode("tr",null,[e.createVNode("th",null,"Id"),e.createVNode("th",null,"Actions")],-1),y={class:"vfe-content"},h={class:"vfe-actions"},b={class:"vfe-menu"};!function(e,t){void 0===t&&(t={});var n=t.insertAt;if(e&&"undefined"!=typeof document){var r=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");o.type="text/css","top"===n&&r.firstChild?r.insertBefore(o,r.firstChild):r.appendChild(o),o.styleSheet?o.styleSheet.cssText=e:o.appendChild(document.createTextNode(e))}}('\n.vue-file-explorer {\n  display: flex;\n  flex-direction: column;\n}\n.vfe-bar {\n  display: flex;\n  justify-content: space-between;\n}\n/* .vfe-path */\n/* .vfe-layout */\n\n/* .vfe-content */\n/* .vfe-cards */\n.vfe-table {\n  width: 100%;\n}\n/* .vfe-table > * */\n\n/* .vfe-header */\n/* .vfe-folder */\n/* .vfe-file */\n.vfe-actions {\n  position: relative;\n}\n.vfe-actions > label {\n  user-select: none;\n}\n.vfe-actions > input[type="checkbox"] {\n  display: none;\n}\n.vfe-actions .vfe-menu {\n  z-index: -1;\n  position: absolute;\n  display: flex;\n  flex-direction: column;\n  overflow: hidden;\n  opacity: 0;\n  height: 0;\n  width: 0;\n}\n.vfe-actions > input:checked + .vfe-menu {\n  z-index: 1;\n  height: auto;\n  width: auto;\n  opacity: 1;\n}\n'),o.render=function(n,r,o,m,g,k){return e.openBlock(),e.createBlock("div",a,[e.createVNode("div",l,[e.createVNode("div",i,[e.renderSlot(n.$slots,"folder-path",{path:n.path},(function(){return[(e.openBlock(!0),e.createBlock(e.Fragment,null,e.renderList(n.path,(function(n,r){var o=t(n,3),a=o[0],l=o[1],i=o[2];return e.openBlock(),e.createBlock(e.Fragment,{key:r},["current"===i?(e.openBlock(),e.createBlock("span",u,e.toDisplayString(l),1)):(e.openBlock(),e.createBlock("button",{key:1,type:"button","data-open":a},e.toDisplayString(l),9,["data-open"]))],64)})),128))]}))]),e.createVNode("div",c,[e.renderSlot(n.$slots,"layout-selector",{},(function(){return[d,f]}))])]),e.createVNode("div",s,["cards"===n.layoutType?(e.openBlock(),e.createBlock("div",{key:0,class:["vfe-cards",n.cards]},null,2)):(e.openBlock(),e.createBlock("table",{key:1,class:["vfe-table",n.table]},[e.createVNode("thead",v,[e.renderSlot(n.$slots,"table-header",{},(function(){return[p]}))]),e.createVNode("tbody",y,[e.renderSlot(n.$slots,"table-folders",{folders:n.folders,tree:n.tree},(function(){return[(e.openBlock(!0),e.createBlock(e.Fragment,null,e.renderList(n.folders,(function(t){return e.openBlock(),e.createBlock("tr",{key:t.id,class:"vfe-folder"},[e.renderSlot(n.$slots,"table-folder",{id:t.id,data:t,tree:n.tree},(function(){return[e.createVNode("td",null,e.toDisplayString(t.id),1),e.createVNode("td",h,[e.createVNode("label",{for:"id-".concat(t.id)},"Actions",8,["for"]),e.createVNode("input",{type:"checkbox",id:"id-".concat(t.id)},null,8,["id"]),e.createVNode("div",b,[e.createVNode("button",{type:"button","data-open":t.id},"Abrir",8,["data-open"]),e.createVNode("button",{type:"button","data-action":"rename","data-folder":t.id},"Renombrar",8,["data-folder"]),e.createVNode("button",{type:"button","data-action":"delete","data-folder":t.id},"Eliminar",8,["data-folder"])])])]}))])})),128))]}))])],2))])])};var m=function(){var e=o;return e.install=function(t){t.component("FileExplorer",e)},e}(),g=Object.freeze({__proto__:null,default:m});return Object.entries(g).forEach((function(e){var n=t(e,2),r=n[0],o=n[1];"default"!==r&&(m[r]=o)})),m}(Vue);