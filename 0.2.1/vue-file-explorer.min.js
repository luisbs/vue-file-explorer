var FileExplorer=function(e){"use strict";function t(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function r(e){for(var r=1;r<arguments.length;r++){var o=null!=arguments[r]?arguments[r]:{};r%2?t(Object(o),!0).forEach((function(t){n(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):t(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==r)return;var n,o,a=[],l=!0,i=!1;try{for(r=r.call(e);!(l=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);l=!0);}catch(e){i=!0,o=e}finally{try{l||null==r.return||r.return()}finally{if(i)throw o}}return a}(e,t)||a(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){if(e){if("string"==typeof e)return l(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?l(e,t):void 0}}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var i=e.defineComponent({name:"FileExplorer",emits:["initialLoad","folderLoad","action","preUpdate","postUpdate"],props:{layout:{type:String,default:"table",validator:function(e){return["cards","table"].includes(e)}},title:{type:String,default:"title"},cards:String,table:String},setup:function(t,n){var l=n.emit,i=e.ref(t.layout),c=e.ref({}),u=e.ref("0"),d=function(e){Array.isArray(e)?"string"==typeof e[0]?c.value[String(e[0])]=e[1]:e.forEach((function(e){var t=o(e,2),r=t[0],n=t[1];return c.value[String(r)]=n})):Object.entries(e).forEach((function(e){var t=o(e,2),r=t[0],n=t[1];return c.value[String(r)]=n}))};return l("initialLoad",(function(e,t){d(e),u.value=String(t||"0")})),e.watch([i,u],(function(){return l("preUpdate")})),e.watch([i,u],(function(){return l("postUpdate")}),{flush:"post"}),e.onMounted((function(){l("postUpdate");var t=document.querySelector(".vfe");t&&(t.onclick=function(n){try{var o,f,s,p,v,y,b,h=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=a(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,i=!0,c=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){c=!0,l=e},f:function(){try{i||null==r.return||r.return()}finally{if(c)throw l}}}}(null!==(o=null!==(f=n.composedPath())&&void 0!==f?f:null===(s=event)||void 0===s?void 0:s.path)&&void 0!==o?o:[null!==(p=null===(v=event)||void 0===v?void 0:v.target)&&void 0!==p?p:null===(y=event)||void 0===y?void 0:y.currentTarget]);try{for(h.s();!(b=h.n()).done;){var m,g=b.value;if(g===t)break;var k=null!==(m=null==g?void 0:g.dataset)&&void 0!==m?m:{};"open"in k?function(){var e=k.open||"0";l("folderLoad",e,d,e in c.value,(function(){return u.value=e}))}():"layout"in k&&(i.value=k.layout||"table");var S={tree:e.readonly(c.value),append:d,on:u.value,action:k.action||"unknown"};"action"in k&&"folder"in k?l("action",r(r({},S),{},{folder:k.folder||"0"})):"action"in k&&"file"in k?l("action",r(r({},S),{},{file:k.file||"0"})):"action"in k&&l("action",S)}}catch(e){h.e(e)}finally{h.f()}}catch(e){console.error(e)}})})),{layoutType:i,folderId:u,tree:e.computed((function(){return c.value})),folders:e.computed((function(){var e;return(null===(e=c.value[u.value])||void 0===e?void 0:e.folders)||[]})),files:e.computed((function(){var e;return(null===(e=c.value[u.value])||void 0===e?void 0:e.files)||[]})),path:e.computed((function(){var e=[],r=c.value[u.value];if(e.push([u.value,String(null==r?void 0:r[t.title]),"current"]),null!=r&&r.parentId){var n,o=null!==(n=String(r.parentId))&&void 0!==n?n:null;do{var a=c.value[o];a&&(a.parentId?(e.unshift([o,String(null==a?void 0:a[t.title])]),o=a.parentId):(e.unshift([o,String(null==a?void 0:a[t.title]),"root"]),o=null))}while(null!==o)}return e}))}}}),c={class:"vfe vue-file-explorer"},u={class:"vfe-bar"},d={class:"vfe-path"},f={key:0},s={class:"vfe-layout"},p=e.createVNode("button",{type:"button","data-layout":"cards"},"Cards Layout",-1),v=e.createVNode("button",{type:"button","data-layout":"table"},"Table Layout",-1),y={class:"vfe-content"},b={class:"vfe-header"},h=e.createVNode("tr",null,[e.createVNode("th",null,"Id"),e.createVNode("th",null,"Actions")],-1),m={class:"vfe-content"},g={class:"vfe-actions"},k={class:"vfe-actions"};i.render=function(t,r,n,a,l,i){return e.openBlock(),e.createBlock("div",c,[e.createVNode("div",u,[e.createVNode("div",d,[e.renderSlot(t.$slots,"folder-path",{path:t.path},(function(){return[(e.openBlock(!0),e.createBlock(e.Fragment,null,e.renderList(t.path,(function(t,r){var n=o(t,3),a=n[0],l=n[1],i=n[2];return e.openBlock(),e.createBlock(e.Fragment,{key:r},["current"===i?(e.openBlock(),e.createBlock("span",f,e.toDisplayString(l),1)):(e.openBlock(),e.createBlock("button",{key:1,type:"button","data-open":a},e.toDisplayString(l),9,["data-open"]))],64)})),128))]}))]),e.createVNode("div",s,[e.renderSlot(t.$slots,"layout-selector",{},(function(){return[p,v]}))])]),e.renderSlot(t.$slots,"help-bar"),e.createVNode("div",y,["cards"===t.layoutType?(e.openBlock(),e.createBlock("div",{key:0,class:["vfe-cards",t.cards]},[e.renderSlot(t.$slots,"cards-folders",{folders:t.folders,tree:t.tree},(function(){return[(e.openBlock(!0),e.createBlock(e.Fragment,null,e.renderList(t.folders,(function(r,n){return e.openBlock(),e.createBlock("div",{key:n,class:"vfe-folder"},[e.renderSlot(t.$slots,"cards-folder",{id:r.id,data:r,tree:t.tree},(function(){return[e.createVNode("button",{type:"butten","data-open":r.id},e.toDisplayString(r.id),9,["data-open"])]}))])})),128))]})),e.renderSlot(t.$slots,"cards-files",{files:t.files},(function(){return[(e.openBlock(!0),e.createBlock(e.Fragment,null,e.renderList(t.files,(function(r,n){return e.openBlock(),e.createBlock("div",{key:n,class:"vfe-file"},[e.renderSlot(t.$slots,"cards-file",{id:r.id,data:r},(function(){return[e.createVNode("span",null,e.toDisplayString(r.id),1)]}))])})),128))]}))],2)):(e.openBlock(),e.createBlock("table",{key:1,class:["vfe-table",t.table]},[e.createVNode("thead",b,[e.renderSlot(t.$slots,"table-header",{},(function(){return[h]}))]),e.createVNode("tbody",m,[e.renderSlot(t.$slots,"table-folders",{folders:t.folders,tree:t.tree},(function(){return[(e.openBlock(!0),e.createBlock(e.Fragment,null,e.renderList(t.folders,(function(r){return e.openBlock(),e.createBlock("tr",{key:r.id,class:"vfe-folder"},[e.renderSlot(t.$slots,"table-folder",{id:r.id,data:r,tree:t.tree},(function(){return[e.createVNode("td",null,e.toDisplayString(r.id),1),e.createVNode("td",g,[e.createVNode("button",{type:"button","data-open":r.id},"Abrir",8,["data-open"]),e.createVNode("button",{type:"button","data-action":"rename","data-folder":r.id},"Renombrar",8,["data-folder"]),e.createVNode("button",{type:"button","data-action":"delete","data-folder":r.id},"Eliminar",8,["data-folder"])])]}))])})),128))]})),e.renderSlot(t.$slots,"table-files",{files:t.files},(function(){return[(e.openBlock(!0),e.createBlock(e.Fragment,null,e.renderList(t.files,(function(r){return e.openBlock(),e.createBlock("tr",{key:r.id,class:"vfe-file"},[e.renderSlot(t.$slots,"table-file",{id:r.id,data:r},(function(){return[e.createVNode("td",null,e.toDisplayString(r.id),1),e.createVNode("td",k,[e.createVNode("button",{type:"button","data-action":"open","data-file":r.id},"Abrir",8,["data-file"]),e.createVNode("button",{type:"button","data-action":"rename","data-file":r.id},"Renombrar",8,["data-file"]),e.createVNode("button",{type:"button","data-action":"delete","data-file":r.id},"Eliminar",8,["data-file"])])]}))])})),128))]}))])],2))])])};var S=function(){var e=i;return e.install=function(t){t.component("FileExplorer",e)},e}(),B=Object.freeze({__proto__:null,default:S});return Object.entries(B).forEach((function(e){var t=o(e,2),r=t[0],n=t[1];"default"!==r&&(S[r]=n)})),S}(Vue);